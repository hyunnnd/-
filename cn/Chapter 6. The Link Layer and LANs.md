

## **Link layer: introduction**

**용어 정리:**
- **hosts와 routers:** 노드(nodes)
- **통신 경로를 따라 인접 노드를 연결하는 통신 채널:** 링크(links)
    - 유선(wired)
    - 무선(wireless)
    - LANs
- **2계층 패킷:** 프레임(frame)
    - 프레임은 데이터그램을 포함(encapsulate)함

**링크 계층(link layer)**은  
한 노드에서 **물리적으로 인접한** 다른 노드로  
데이터그램을 전송하는 책임을 가짐.

# 🔵 **간단 요약**

링크 계층은 **같은 링크 상에 물리적으로 연결된 노드들 간** 데이터그램을 프레임 형태로 전달하는 역할을 담당함.



### **Link layer: context**

- 데이터그램은 여러 링크에서 **다른 링크 프로토콜**에 의해 전송됨
    - 예: 첫 번째 링크는 WiFi, 다음 링크는 Ethernet
- 각 링크 프로토콜은 **서로 다른 서비스**를 제공함
    - 예: 신뢰적인 데이터 전송을 제공할 수도 있고, 제공하지 않을 수도 있음

### **운송(transportation) 비유:**

- Princeton → Lausanne 여행
    - 리무진: Princeton → JFK
    - 비행기: JFK → Geneva
    - 기차: Geneva → Lausanne
- **관광객 = 데이터그램**
- **각 이동 구간 = 통신 링크**
- **이동 수단 = 링크 계층 프로토콜**
- **여행사 = 라우팅 알고리즘**

# 🔵 **간단 요약**

데이터그램은 목적지까지 가는 동안 여러 종류의 링크(WiFi, Ethernet 등)를 거치며, 각 링크는 서로 다른 프로토콜과 기능을 제공함. 이를 여행에 비유하여, 관광객은 데이터그램, 이동 구간은 링크, 이동 수단은 링크 프로토콜, 여행사는 라우팅 알고리즘으로 설명함.


## **링크 계층: 서비스**

- **프레이밍(frming), 링크 접근(link access):**
    - 데이터그램을 프레임에 캡슐화하여 헤더와 트레일러를 추가함
    - 공유 매체인 경우 채널 접근 필요
    - 프레임 헤더의 **MAC 주소**는 출발지와 목적지를 식별함  
        (IP 주소와는 다른 주소임!)


- **인접 노드 간의 신뢰성 있는 전달(reliable delivery):**    
    - 우리는 이미 이 방법을 알고 있음
    - 오류율이 낮은 링크에서는 거의 사용되지 않음
    - 무선 링크는 오류율이 높음
    - **Q:** 왜 링크 계층과 종단 간(end-to-end) 모두에서 신뢰성 기능이 필요한가?


# 🔵 **간단 요약**

링크 계층은 데이터그램을 프레임으로 감싸고, MAC 주소를 기반으로 이웃 노드와 통신함. 무선처럼 오류율이 높은 구간에서는 링크 계층에서 신뢰성 있는 전달(재전송 등)이 필요하지만, 전체 경로에 대한 신뢰성은 전송 계층(TCP)이 담당하기 때문에 두 계층에서 각각 신뢰 메커니즘이 존재함.


## **링크 계층: 서비스 (추가)**

- **흐름 제어(flow control):**
    - 인접한 송신 노드와 수신 노드 사이의 전송 속도 조절

- **오류 검출(error detection):**    
    - 신호 감쇠, 잡음 등에 의해 발생하는 오류를 탐지
    - 수신자가 오류를 감지하면 재전송을 요청하거나 프레임을 폐기함

- **오류 정정(error correction):**    
    - 수신자가 비트 오류를 **재전송 없이** 스스로 식별하고 수정할 수 있음

- **반이중(half-duplex)과 전이중(full-duplex):**
  
    - 반이중: 링크 양쪽 노드가 전송할 수는 있지만 **동시에**는 불가능     
    - 전이중: 양쪽이 동시에 송수신 가능

# 🔵 **간단 요약**

링크 계층은 인접 노드 간 통신 품질을 보장하기 위해 흐름 제어, 오류 검출 및 정정 기능을 제공하며, 무선 등 다양한 매체에서 반이중 또는 전이중 방식으로 동작할 수 있다.


## Multiple access links, protocols

두 가지 종류의 “링크”:

### **point-to-point(점대점)**

- 이더넷 스위치와 호스트 간의 점대점 링크
- 전화 접속(dial-up)을 위한 PPP

### **broadcast (공유된 전선 또는 매체)**

- 오래된 형태의 이더넷
- 케이블 기반 액세스 네트워크의 업스트림 HFC
- 802.11 무선 LAN, 4G/5G, 위성 통신

(아래 그림: 공유된 유선(Ethernet), 공유 무선(4G/5G, WiFi), 위성, 사람들이 하나의 공기를 공유하며 대화하는 상황 등)

# 🔵 **간단 요약**

네트워크 링크는 **점대점 링크**(1:1 연결)와 **브로드캐스트 링크**(여러 노드가 하나의 매체를 공유)로 나눌 수 있다. 브로드캐스트 방식은 WiFi, 4G/5G, 이더넷 허브, 위성 등의 공유 매체 기반 네트워크에서 사용된다.


## Multiple access protocols

- 단일 공유 브로드캐스트 채널
- 노드들이 동시에 두 개 이상 전송하면 간섭 발생
    - 하나의 노드가 두 개 이상의 신호를 동시에 받으면 _collision(충돌)_ 발생

### **multiple access protocol (다중 접근 프로토콜)**

- 노드들이 채널을 어떻게 공유할지 결정하는 **분산 알고리즘**  
    즉, 어떤 노드가 언제 전송할 수 있는지를 결정함    
- 채널 공유에 대한 통신도 **해당 채널 자체를 사용해야 함**
    - 조정을 위한 별도의(out-of-band) 채널이 없음

# 🔵 **간단 요약**

여러 노드가 하나의 공유 채널을 사용할 때 동시에 전송하면 충돌이 발생하므로, 이를 방지하기 위해 **다중 접근 프로토콜**이 필요하다. 이 프로토콜은 노드들이 언제 전송할 수 있는지를 스스로 결정하는 **분산 방식**으로 운영되며, 조정 메시지도 같은 채널을 통해 이루어진다.


## Where is the link layer implemented?

- 모든 호스트에 구현되어 있음
- 링크 계층은 **네트워크 인터페이스 카드(NIC)** 또는 칩에서 구현됨
    - 예: Ethernet 카드, WiFi 카드 또는 칩
    - 링크 계층과 물리 계층을 구현함
- 호스트의 시스템 버스(예: PCI 버스)에 연결됨    
- 하드웨어, 소프트웨어, 펌웨어의 조합으로 동작함

# 🔵 **간단 요약**

링크 계층은 **NIC(네트워크 인터페이스 카드)** 내부에서 구현되며, 하드웨어·소프트웨어·펌웨어가 함께 동작하여 링크 계층 및 물리 계층을 처리한다. 모든 호스트는 NIC를 통해 링크 계층 기능을 수행한다.


## Interfaces communicating

### 송신 측 (sending side):

- 데이터그램을 프레임으로 캡슐화함
- 오류 검출 비트, 신뢰적 데이터 전송, 흐름 제어 등의 정보를 프레임에 추가함

### 수신 측 (receiving side):

- 오류 여부·신뢰적 데이터 전송·흐름 제어 등을 확인함
- 데이터그램을 추출하여 상위 계층으로 전달함

# 🔵 **간단 요약**

송신 NIC는 **데이터그램을 프레임으로 감싸고**, 오류 검출 및 제어 정보를 추가하여 전송한다.  
수신 NIC는 **오류를 검사하고** 프레임에서 데이터그램을 꺼내 **네트워크 계층으로 전달**한다.



