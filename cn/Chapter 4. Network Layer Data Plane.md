
## 📌 Network-layer services and protocols (네트워크 계층 서비스 및 프로토콜)

### 1. 송신 호스트에서 수신 호스트로 세그먼트 전달

- **송신자(sender)**  
    전송 계층에서 만들어진 세그먼트를 **데이터그램(datagram)** 형태로 캡슐화한 뒤 **링크 계층으로 전달**합니다.

- **수신자(receiver)**  
    링크 계층으로부터 수신한 데이터그램에서 세그먼트를 **추출하여 전송 계층 프로토콜에 전달**합니다.    

### 2. 네트워크 계층 프로토콜의 적용 범위

- 네트워크 계층은 **모든 인터넷 장치(every Internet device)** 에 존재합니다.  
    예시: **호스트(host), 라우터(router)**

### 3. 라우터의 역할

- **수신한 모든 IP 데이터그램의 헤더 필드를 검사**합니다.
- **입력 포트에서 받은 데이터그램을 적절한 출력 포트로 전달**하여  
    **종단 간(end-to-end) 경로를 따라 데이터그램이 이동하도록 함**.

## 📌 그림 설명 (간단 해설)

- 모바일 네트워크, 기업 네트워크, 데이터센터 네트워크, 글로벌 ISP 등이 **연결되어 하나의 인터넷 경로를 구성**하고 있습니다.
- 각 라우터는 **network / link / physical 계층**으로 구성되어 있으며  
    패킷을 전달할 때 **상위 계층의 데이터를 해석하지 않고 IP 헤더만 기반으로 전달 결정**을 수행합니다.
- **호스트는 application / transport / network / link / physical 계층을 모두 사용**합니다.

## 💡 핵심 요약

| 구성 요소      | 역할                                |
| ---------- | --------------------------------- |
| Sender     | 세그먼트를 데이터그램으로 캡슐화 후 링크 계층으로 전달    |
| Receiver   | 데이터그램에서 세그먼트를 추출해 전송 계층으로 전달      |
| Router     | IP 헤더 검사, 입력 포트 → 출력 포트로 데이터그램 전달 |
| Network 계층 | 모든 인터넷 장치에 존재하며 IP 기반 전달 수행       |

## ✔ 보충 설명

- 네트워크 계층의 대표 프로토콜은 **IP(Internet Protocol)** 입니다.    
- 라우터는 **IP 주소 기반으로 경로를 결정(route)** 하며, **종단 간 신뢰성 보장은 하지 않습니다**.  
    신뢰성은 전송 계층(TCP 등)이 담당합니다.
- 데이터그램 전달의 목표는 **최선형(best-effort)** 전달이며,  
    **지연·손실이 발생하더라도 재전송을 보장하지 않습니다**.



## 📌 Two key network-layer functions (네트워크 계층의 두 핵심 기능)

### 1) Forwarding (포워딩)

- 라우터의 **입력 링크로 들어온 패킷을 적절한 출력 링크로 이동시키는 과정**입니다.
- 즉, **패킷을 다음 라우터 또는 목적지로 넘기는 동작 자체**를 의미합니다.

### 2) Routing (라우팅)

- 패킷이 **출발지에서 목적지까지 도달하기 위한 전체 경로를 결정하는 과정**입니다.
- **라우팅 알고리즘(routing algorithms)** 을 사용하여 최적 경로를 계산합니다.    

## 🔍 둘의 차이를 이해하는 비유 (여행에 비교)

|개념|여행에 비유|설명|
|---|---|---|
|Forwarding|교차로(인터체인지)에서 길을 선택해 빠져나오는 과정|이미 계획된 경로에 따라 다음 구간으로 이동하는 수행 단계|
|Routing|출발지부터 목적지까지 갈 전체 경로를 사전에 계획하는 과정|어떤 경로로 갈지 결정하는 계획 단계|

## ✔ 핵심 요약

|항목|수행 시점|담당 주체|주요 작동 방식|
|---|---|---|---|
|Forwarding|실시간 패킷 전달 중|라우터|포워딩 테이블을 기반으로 다음 출력 포트 선택|
|Routing|경로 계산 단계|각각의 라우터 + 네트워크 전체|라우팅 알고리즘을 통해 경로 계산 후 라우팅 테이블 구성|


## 💡 추가 설명

- Forwarding과 Routing은 함께 동작하지만 **책임 범위가 다릅니다**.  
    Forwarding은 **“지금 이 패킷을 어디로 보낼까?”**,  
    Routing은 **“전체적으로 어떤 경로가 가장 최적·가장 빠르게 목적지에 도달할까?”** 를 결정합니다.
- Routing의 결과가 **라우팅 테이블을 생성하고 유지**, Forwarding은 **라우팅 테이블을 실제 패킷 전달에 사용**합니다.